# 로그 문서

## 목차

---
1. log 목적
2. log 형식 및 전략
3. 설정 파일로 xml 사용 이유

## 1. log 목적

---
문제 상황에서 빠르게 에러의 원인을 찾을 수 있게 
관련 정보를 제공하는 것을 목표로 한다. 특히 예상되거나 
이전에 발생한 에러의 경우 신속하게 찾을 수 있도록
해당 부분을 반영하여 전략을 수정/작성한다.
1. 문제 구분
   - jwt 인증 문제:
   해당 jwt가 인증에 실패한 날짜, 시간, class, 
   예상 원인에 대한 정보 필요.
   - 크롤링 관련 문제:
   크롤링 한 정보, 크롤링 시간, 쓰레드 번호를 담은 
   로그 필요
     - 중복 알림 error(thread 안정성 문제):
         쓰레드와 최신글에 대한 정보 필요
   - 이메일 송신 문제:
   받는 사람, 게시글 정보를 담은 로그 필요
   - 회원 가입, 탈퇴, 정보 수정:
     가입시 서버로 넘어온 정보, database 저장
     정보, 쓰레드, 날짜, 시간 에 대한 로그 필요

## 2. log 형식 및 전략

---
1. Size and Time-based Rolling을 사용한다.
   1. size -> 50MB
   2. time -> 1week
   3. name -> 프로젝트 명 + 날짜 + 인덱스
      - ./log/cau-noti-dev-%d{yyyy-MM-dd}.%i.log
2. 날짜
   - yyyy-MM-dd 형식 사용
3. 시간
   - HH:mm:ss.SSS 형식 사용
4. 키워드
   1. 토큰: %jwt
   2. 크롤링: %crawl
   3. 메일: %mail
   4. 사용자: %user
5. 주제 별 필요 정보
   1. 토큰: 날짜, 시간, class, 예상 원인
   2. 크롤링: 날짜, 시간, 크롤링 정보, 쓰레드 번호
   3. 메일: 날짜, 시간, 쓰레드, 받는사람, 보낸 정보
   4. 사용자: 날짜, 시간, 쓰레드, 서버로 넘어온 정보, database 저장 정보

## 3. logback 설정에 xml을 사용한 이유

---
- yml, property 방식을 사용할 때 보다 
세세한 제어가 가능하여 xml 방식을 사용

